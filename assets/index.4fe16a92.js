var j=Object.defineProperty,T=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var B=(e,t,s)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,F=(e,t)=>{for(var s in t||(t={}))z.call(t,s)&&B(e,s,t[s]);if(q)for(var s of q(t))G.call(t,s)&&B(e,s,t[s]);return e},N=(e,t)=>T(e,M(t));import{d as u,c,r as W,n as P,o as l,a as f,b as V,e as K,w as J,f as h,g as o,t as p,h as Q,i as _,j as w,k as C,l as I,u as U,m as $,p as R,q as X,T as Y,s as v,F as S,v as A,x as L,y as D,z as Z,A as ee,B as te,C as se,D as oe,E as ne,G as b,H as ae}from"./vendor.104f4c6d.js";const re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}};re();var m=(e,t)=>{const s=e.__vccOpts||e;for(const[r,a]of t)s[r]=a;return s};const ie=u({props:{disabled:{type:Boolean,default:!1}}});function le(e,t,s,r,a,i){return l(),c("li",{class:P(["dropdown-item",{"is-disabled":e.disabled}])},[W(e.$slots,"default")],2)}var ce=m(ie,[["render",le]]);const de=e=>{const t=f(!1);V(()=>{document.addEventListener("click",s)}),K(()=>{document.removeEventListener("click",s)});const s=r=>{e.value&&(e.value.contains(r.target)?t.value=!1:t.value=!0)};return t},ue=u({name:"DropDown",props:{title:{type:String,required:!0}},components:{DropDownItem:ce},setup(){const e=f(!1),t=()=>{e.value=!e.value},s=f(null),r=de(s);return J(r,()=>{e.value&&r.value&&(e.value=!1)}),{isOpen:e,toggleOpen:t,dropDownRef:s}}}),pe={class:"dropdown",ref:"dropDownRef"},me={key:0,class:"dropdown-menu",style:{display:"block"}},_e=o("a",{href:"#",style:{"text-decoration":"none"}},"\u7F16\u8F91\u8D44\u6599",-1),he=I("\u65B0\u5EFA\u6587\u7AE0"),ge=o("a",{href:"#",style:{"text-decoration":"none"}},"\u9000\u51FA",-1);function fe(e,t,s,r,a,i){const n=h("drop-down-item"),d=h("router-link");return l(),c("div",pe,[o("a",{href:"#",class:"btn btn-outline-light my-2 dropdown-toggle",onClick:t[0]||(t[0]=Q((...y)=>e.toggleOpen&&e.toggleOpen(...y),["prevent"]))},p(e.title),1),e.isOpen?(l(),c("ul",me,[_(n,{disabled:!0},{default:w(()=>[_e]),_:1}),_(n,null,{default:w(()=>[_(d,{to:{name:"create"},style:{"text-decoration":"none"}},{default:w(()=>[he]),_:1})]),_:1}),_(n,null,{default:w(()=>[ge]),_:1})])):C("",!0)],512)}var ve=m(ue,[["render",fe]]);const $e=u({name:"GlobalHeader",props:{user:{type:Object,required:!0}},components:{DropDown:ve},setup(){const e=U();return $(),{handleLogin:()=>{e.push({name:"login",path:"/login"})}}}}),ye={class:"d-flex justify-content-between px-4 bg-primary mb-5"},be=o("a",{href:"#",class:"navbar-brand"},[o("img",{src:"https://images.wondershare.com/democreator/images2021/education-students/nav-icon1.svg",alt:""})],-1),we={key:0},Le=o("a",{href:"#",class:"btn btn-outline-light my-2"},"register",-1),De={key:1};function ke(e,t,s,r,a,i){const n=h("drop-down");return l(),c("nav",ye,[be,e.user.isLogin?(l(),c("div",De,[_(n,{title:`\u4F60\u597D\uFF0C${e.user.name}`},null,8,["title"])])):(l(),c("div",we,[o("a",{href:"#",class:"btn btn-outline-light my-2 mx-4",onClick:t[0]||(t[0]=(...d)=>e.handleLogin&&e.handleLogin(...d))},"login"),Le]))])}var Ce=m($e,[["render",ke]]);const Ie=u({props:{text:{type:String},bgColor:{type:String}},setup(){const e=document.createElement("div");e.id="main",document.body.appendChild(e)}}),Se=o("div",{class:"spinner-border",role:"status"},[o("span",{class:"visually-hidden"},"Loading...")],-1),Ae={key:0,class:"text-primary small"};function xe(e,t,s,r,a,i){return l(),R(Y,{to:"#main"},[o("div",{class:"d-flex justify-content-center align-items-center h-100 loader-container",style:X({backgroundColor:e.bgColor||""})},[Se,e.text?(l(),c("p",Ae,p(e.text),1)):C("",!0)],4)])}var Oe=m(Ie,[["render",xe]]);const Ee=u({name:"App",components:{GlobalHeader:Ce,Loading:Oe},setup(){const e=$(),t=v(()=>e.state.user),s=v(()=>e.state.loading);return console.log(s.value),{user:t,test:"123",isLoading:s}}}),He={class:"container"},qe=o("div",{class:"custom-control my-3"},[o("input",{type:"checkbox",id:"check1",class:"custom-control-input"}),o("label",{class:"custom-control-label",for:"check1"}," I accept these rules. ")],-1),Be={class:"text-center py-4 text-secondary bg-light"},Fe={class:"list-inline mb-0",style:{"list-style":"none"}},Ne=o("li",{class:"list-inline-item mx-3"},"@ws",-1),Pe=o("li",{class:"list-inline-item mx-3"},"contact us",-1),Ve=o("li",{class:"list-inline-item mx-3"},"document",-1),Ue=["data-go"];function Re(e,t,s,r,a,i){const n=h("global-header"),d=h("router-view"),y=h("loading");return l(),c("div",He,[_(n,{user:e.user},null,8,["user"]),_(d),e.isLoading?(l(),R(y,{key:0,text:"loading"})):C("",!0),qe,o("footer",Be,[o("ul",Fe,[Ne,Pe,Ve,o("li",{class:"list-inline-item mx-3","data-go":`ces${e.test}`},"more",8,Ue)])])])}var je=m(Ee,[["render",Re]]);const Te=u({setup(){const e=$();V(()=>{e.dispatch("fetchHomeData")});const t=v(()=>e.state.searchData&&e.state.searchData.slice(0,8)),s=v(()=>e.state.shopData),r=f("");return{list:t,product_name:r,handleSearch:()=>{e.dispatch("fetchProduct",r.value)},banner:s}}}),x=e=>(Z("data-v-5df34980"),e=e(),ee(),e),Me=x(()=>o("h2",null,[I("Part2 "),o("span",{class:"lead"},"learn vuex actions")],-1)),ze={class:"row row-cols-4"},Ge=["src"],We=x(()=>o("br",null,null,-1)),Ke={class:"input-group w-50 m-auto my-5 mb-3"},Je=x(()=>o("div",{style:{"line-height":"2.2","margin-left":"4rem"},class:"ml-5"},"for example:tv",-1)),Qe={class:"list-group w-75 m-auto"};function Xe(e,t,s,r,a,i){return l(),c("div",null,[Me,o("div",ze,[(l(!0),c(S,null,A(e.banner,n=>(l(),c("div",{class:"col",key:n.name},[o("div",null,[o("img",{src:n.image_src,alt:""},null,8,Ge),We,I(" "+p(n.name),1)])]))),128))]),o("div",Ke,[L(o("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>e.product_name=n),class:"form-control",placeholder:"search a product","aria-label":"Recipient's username","aria-describedby":"button-addon2"},null,512),[[D,e.product_name]]),o("button",{onClick:t[1]||(t[1]=(...n)=>e.handleSearch&&e.handleSearch(...n)),class:"btn btn-outline-secondary",type:"button",id:"button-addon2"},"search"),Je]),o("div",Qe,[(l(!0),c(S,null,A(e.list,n=>(l(),c("a",{href:"#",key:n.goods_id,class:"list-group-item list-group-item-action text-left"},p(n.goods_name),1))),128))])])}var Ye=m(Te,[["render",Xe],["__scopeId","data-v-5df34980"]]);const Ze=u({name:"ColumnList",props:{list:{type:Array,required:!0}},setup(e){return{columnList:v(()=>e.list.map(s=>(s.avatar||(s.avatar="https://images.wondershare.com/democreator/images2021/education-students/getting-start-icon3.svg"),s)))}}}),et={class:"row"},tt={class:"card shadow-sm h-100"},st={class:"card-body text-center"},ot=["src","alt"],nt={class:"card-text"},at=I("view detals");function rt(e,t,s,r,a,i){const n=h("router-link");return l(),c("ul",et,[(l(!0),c(S,null,A(e.columnList,d=>(l(),c("li",{class:"col-4 mb-3",style:{"list-style":"none"},key:d.id},[o("div",tt,[o("div",st,[o("img",{src:d.avatar,class:"w-25 border border-light my-3",alt:d.title},null,8,ot),o("h5",null,p(d.title),1),o("p",nt,p(d.description),1),_(n,{to:{name:"detail",params:{id:d.id}},class:"btn btn-outline-primary"},{default:w(()=>[at]),_:2},1032,["to"])])])]))),128))])}var it=m(Ze,[["render",rt]]);const lt=u({name:"detail",setup(){const e=$();return{list:v(()=>e.state.columnData)}},components:{ColumnList:it,Shop:Ye}});function ct(e,t,s,r,a,i){const n=h("column-list"),d=h("shop");return l(),c("div",null,[_(n,{list:e.list},null,8,["list"]),_(d)])}var dt=m(lt,[["render",ct]]);const ut=u({name:"detail",setup(){const e=te(),t=$(),s=+e.params.id,r=v(()=>t.getters.getColumnById(s)),a=v(()=>t.state.articleData.filter(i=>i.columnId===s));return{column:r,list:a}}}),pt={class:"w-75 mx-auto"},mt={class:"row mb-4 border-bottom pb-4 align-items-center"},_t={class:"col-3 text-center"},ht=["src","alt"],gt={class:"col-9"},ft={class:"text-left"},vt={class:"text-muted text-left"},$t={class:"card-body pl-5"},yt={class:"row my-3 align-items-center"},bt={key:0,class:"col-3"},wt=["src","alt"],Lt={class:"text-muted"};function Dt(e,t,s,r,a,i){var n,d,y,H;return l(),c("div",pt,[o("div",mt,[o("div",_t,[o("img",{src:(n=e.column)==null?void 0:n.avatar,alt:(d=e.column)==null?void 0:d.title,class:"rounded-circle img-fluid"},null,8,ht)]),o("div",gt,[o("h4",ft,p((y=e.column)==null?void 0:y.title),1),o("p",vt,p((H=e.column)==null?void 0:H.description),1)])]),o("div",null,[(l(!0),c(S,null,A(e.list,g=>(l(),c("article",{key:g.id,class:"card mb-3 shadow"},[o("div",$t,[o("h4",null,p(g.title),1),o("div",yt,[g.image?(l(),c("div",bt,[o("img",{class:"rounded-lg img-fluid",src:g.image,alt:g.title},null,8,wt)])):C("",!0),o("p",{class:P({"col-9":g.image})},p(g.content),3)]),o("span",Lt,p(g.createAt),1)])]))),128))])])}var kt=m(ut,[["render",Dt],["__scopeId","data-v-a23e45e4"]]);const Ct=u({setup(){const e=f(""),t=f(""),s=$(),r=U();return{title:e,content:t,handleSubmit:()=>{const i=s.state.user.columnId;if(i){const n={id:new Date().getTime(),title:e.value,content:t.value,columnId:i,createAt:new Date().toLocaleDateString()};s.commit("createArticle",n),r.push({name:"detail",params:{id:i}})}}}}}),It=o("h4",null,"create a article",-1);function St(e,t,s,r,a,i){return l(),c("div",null,[It,L(o("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>e.title=n)},null,512),[[D,e.title]]),L(o("input",{type:"textarea","onUpdate:modelValue":t[1]||(t[1]=n=>e.content=n)},null,512),[[D,e.content]]),o("a",{class:"btn btn-outline-primary",onClick:t[2]||(t[2]=n=>e.handleSubmit())},"submit")])}var At=m(Ct,[["render",St]]);const xt=u({name:"login",setup(){const e=$(),t=f(""),s=f("");return{handleLogin:()=>{const a={psw:t,userName:s};e.dispatch("handleLogin",a)},psw:t,userName:s}}}),Ot={class:"mb-3"},Et=o("label",{for:"exampleInputEmail1",class:"form-label"},"Email address",-1),Ht=o("div",{id:"emailHelp",class:"form-text"},"We'll never share your email with anyone else.",-1),qt={class:"mb-3"},Bt=o("label",{for:"exampleInputPassword1",class:"form-label"},"Password",-1);function Ft(e,t,s,r,a,i){return l(),c("div",null,[o("div",Ot,[Et,L(o("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=n=>e.userName=n),class:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"},null,512),[[D,e.userName]]),Ht]),o("div",qt,[Bt,L(o("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=n=>e.psw=n),class:"form-control",id:"exampleInputPassword1"},null,512),[[D,e.psw]])]),o("button",{onClick:t[2]||(t[2]=(...n)=>e.handleLogin&&e.handleLogin(...n)),class:"btn btn-primary"},"Submit")])}var Nt=m(xt,[["render",Ft]]);const Pt=se(),O=oe({history:Pt,routes:[{path:"/",name:"home",component:dt},{path:"/detail/:id",name:"detail",component:kt},{path:"/create",name:"create",component:At,meta:{requireLogin:!0}},{path:"/login",name:"login",component:Nt,meta:{redirectAlreadyLogin:!0}}]});O.beforeEach((e,t,s)=>{console.log(e.meta),e.meta.requireLogin&&!k.state.user.isLogin?s({name:"login"}):e.meta.redirectAlreadyLogin&&k.state.user.isLogin?s({name:"home"}):s()});const Vt={isLogin:!1,name:"harry",id:12345655,columnId:2},Ut=[{id:1,title:"test1-column",content:"this s test1 column,a instresting description",createAt:"2021/12/13",columnId:1,image:"https://images.wondershare.com/democreator/images2021/education-students/tips-swiper-pic2.png"},{id:2,title:"test2-column",content:"this s test2 column,a instresting description",createAt:"2021/12/13",columnId:2,image:"https://images.wondershare.com/democreator/images2021/education-students/tips-swiper-pic2.png"},{id:2,title:"test3-column",content:"this s test22 column,a instresting description",createAt:"2021/12/13",columnId:2,image:"https://images.wondershare.com/democreator/images2021/education-students/tips-swiper-pic2.png"}],Rt=[{id:1,title:"title1",description:"description1",avatar:"https://images.wondershare.com/democreator/images2021/education-students/getting-start-icon1.svg"},{id:2,title:"title2",description:"description2",avatar:"https://images.wondershare.com/democreator/images2021/education-students/learning-flexibility-pic.png"}],jt=ne({state:{token:"",loading:!1,articleData:Ut,columnData:Rt,user:Vt,shopData:[],searchData:[]},mutations:{login(e,t){console.log(t),e.user=N(F({},e.user),{isLogin:!0,name:"harry tao",columnId:2}),O.push("/")},createArticle(e,t){e.articleData.push(t)},fetchHomeData(e,t){console.log(t.message),e.shopData=t.message},fetchSearchData(e,t){e.searchData=t.message,console.log(e.searchData)},setLoading(e,t){e.loading=t}},actions:{async fetchHomeData({commit:e}){const{data:t}=await b.get("/api/public/v1/home/catitems");e("fetchHomeData",t)},async fetchProduct(e,t){const{data:s}=await b.get(`/api/public/v1/goods/qsearch?query=${t}`);e.commit("fetchSearchData",s)},async handleLogin({commit:e},t){console.log(t);const s=await b.post("/api/public/v1/users/wxlogin",t);e("login",s)}},getters:{getColumnById(e){return t=>e.columnData.find(s=>s.id==t)},getArticleById(e){return t=>e.articleData.filter(s=>s.id==t)}}});var k=jt;b.defaults.baseURL="https://api-hmugo-web.itheima.net/";b.interceptors.request.use(e=>(k.commit("setLoading",!0),e));b.interceptors.response.use(e=>(k.commit("setLoading",!1),e));const E=ae(je);E.use(k);E.use(O);E.mount("#app");
